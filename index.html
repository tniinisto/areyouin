<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<!-- disable iPhone inital scale -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>R'YouIN</title>

<!-- main css -->
<link href="style.css" rel="stylesheet" type="text/css">

<!-- media queries css -->
<link href="media-queries.css" rel="stylesheet" type="text/css">

<!-- Scripts -->
<script type="text/javascript" src="main.js"> </script>

<!--JQuery -->
<script src="http://code.jquery.com/jquery-2.0.0.min.js"></script>

<!-- html5.js for IE less than 9 -->
<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- css3-mediaqueries.js for IE less than 9 -->
<!--[if lt IE 9]>
	<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
<![endif]-->

</head>

<body>

<div id="pagewrap">

	<header id="header">

		<hgroup>
			<h1 id="site-logo"><a href="">R'YouIN</a></h1>
			<h6 id="userlogin">Welcome</h6>
		</hgroup>

		<nav>
			<ul id="main-nav" class="clearfix">
				<li id="linkgames" class="current"><a href="#">Games</a></li> <!--Simple & clear list on games for player -->
                <!--<li id="linkadmin"><a href="#">Admin</a></li>--> <!-- Admin-->
                <li id="linkadmin"></li>
                <!--<li id="nav_logout" style="float: right;"><a href="http://localhost:18502/" onclick="logout.php"><span style="color:red">Logout</span></a></li>-->
                <li id="nav_logout" style="float: right;"><a href="http://areyouin.azurewebsites.net/" onclick="logout.php"><span style="color:red">Logout</span></a></li>
			</ul>
		</nav>

	</header>
		
	<!-- #content -->
	<div id="event_content_id" class="content">
		<article class="clearfix" onClick="getEvents()">
			<h2>Games</h2>
		</article>
	</div>

    <div id="admin_content_id" class="content noshow">
        <article class="clearfix">
            <h2>Admin</h2>
        </article>
    </div>                    
   	<!-- /#content --> 

	<!-- #sidebar -->
    <aside id="sidebar">

        <section id="playerwidget" class="widget">
                <h2 class="widgettitle" onClick="">Events</h2>
                <ul>
                    <li>Item1</li>
                    <li>Item2</li>
                    <li>Item3</li>
                    <li>Item4</li>
                </ul>
        </section>
    </aside>
    <!-- /#sidebar -->

	<!-- #footer --> 
	
	<footer id="footer">
	
		<p>Made by TN &copy <a href="https://maps.google.fi/maps?q=60.413778,+23.155468&hl=en&sll=60.413778,23.155468&sspn=0.002108,0.004367&t=h&z=16" target="_blank">Puonti </a></p>

	</footer>

	<!-- /#footer --> 
	
</div>
<!-- /#pagewrap -->

<!-- scripts -->
<script>

    //Document ready
    jQuery(document).ready(function () {

        $("#linkgames").click(function (event) {
            $("#main-nav").children().removeClass("current");
            $("#linkgames").addClass("current");
        });

        $("#linkadmin").click(function (event) {
            $("#main-nav").children().removeClass("current");
            $("#linkadmin").addClass("current");
        });

        //Init functions
        getLoginInformation();
        getEvents();
        getPlayersInsert();
        getAdminStatus();

        //SSE init
        setSSE();


    });


    //Content for the selected page
    $("#main-nav").click(function () {
        //alert("Handler for .click() called.");
        //Games
        if ($("#linkgames").hasClass('current')) {
            $("#event_content_id").removeClass("noshow");
            //$("#team_content_id").addClass("noshow");
            //$("#profile_content_id").addClass("noshow");
            $("#admin_content_id").addClass("noshow");
        }
        //////Team
        ////if($("#linkteam").hasClass('current')) {
        ////        $("#event_content_id").addClass("noshow");
        ////        $("#team_content_id").removeClass("noshow");
        ////        $("#profile_content_id").addClass("noshow");
        ////        $("#admin_content_id").addClass("noshow");                        
        ////}
        //////Profile
        ////if($("#linkprofile").hasClass('current')) {
        ////        $("#event_content_id").addClass("noshow");
        ////        $("#team_content_id").addClass("noshow");
        ////        $("#profile_content_id").removeClass("noshow");
        ////        $("#admin_content_id").addClass("noshow");                        
        ////}
        ////Admin
        if ($("#linkadmin").hasClass('current')) {
            $("#event_content_id").addClass("noshow");
            //$("#team_content_id").addClass("noshow");
            //$("#profile_content_id").addClass("noshow");
            $("#admin_content_id").removeClass("noshow");
        }
    });

    //Set game end time from after start time is set
    function game_start() {
        var start = document.getElementById("gamestart_id");
        var end = document.getElementById("gameend_id");

        //alert(start.value);

        //Create date object & add 2 hours
        var dt = start.value.split(" "); //Split date&time
        var d = dt[0].split("-"); //Spilit year, month, day
        var t = dt[1].split(":"); //Split hour,minute
        var datetime = new Date(d[0], d[1] - 1, d[2], t[0], t[1], 0); //Create date object
        datetime.setHours(datetime.getHours() + 2); //Add 2 hours
        //alert(datetime);

        //Convert Date object back to string, check values below 10 and insert 0 before (Month: January=0...)
        var m, d, h, mm;
        if ((datetime.getMonth() + 1) < 10) m = "0" + (datetime.getMonth() + 1); else m = (datetime.getMonth() + 1);
        if (datetime.getDate() < 10) d = "0" + datetime.getDate(); else d = datetime.getDate();
        if (datetime.getHours() < 10) h = "0" + datetime.getHours(); else h = datetime.getHours();
        if (datetime.getMinutes() < 10) mm = "0" + datetime.getMinutes(); else mm = datetime.getMinutes();
        var dstring = datetime.getFullYear() + "-" + m + "-" + d + " " + h + ":" + mm;

        //alert(dstring);

        end.value = dstring;
    }

    //Check game end time validity
    function game_end() {
        //alert("test end");
        var start = document.getElementById("gamestart_id")
        var end = document.getElementById("gameend_id");
        if (start.value > end.value) {
            end.value = start.value;
            //alert("Game's end time must be after start time...");
        }
    }

    function showPlayers(eventid) {
        //alert(eventid);
        var id = "#id_playersfull_" + eventid;
        //alert(id);
        if ($(id).hasClass('noshow'))
            $(id).removeClass("noshow");
        else
            $(id).addClass("noshow");
    }

</script>
<!-- /scripts -->
			
</body>
</html>
